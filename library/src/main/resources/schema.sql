DROP TABLE IF EXISTS Authors CASCADE;
DROP TABLE IF EXISTS Books CASCADE;
DROP TABLE IF EXISTS Genres CASCADE;
DROP TABLE If EXISTS Authors_books CASCADE;

CREATE TABLE IF NOT EXISTS Authors (
  id SERIAL PRIMARY KEY,
  author_name VARCHAR(255) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS Genres (
  id SERIAL PRIMARY KEY,
  genre_name VARCHAR(255) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS Books (
  id SERIAL PRIMARY KEY,
  book_name VARCHAR(255) NOT NULL UNIQUE,
  genre_id INT REFERENCES Genres(id)
);

CREATE TABLE IF NOT EXISTS Authors_books (
  author_id INT NOT NULL REFERENCES Authors(id) ON DELETE CASCADE,
  book_id INT NOT NULL REFERENCES Books(id) ON DELETE CASCADE,
  UNIQUE (author_id, book_id)
);